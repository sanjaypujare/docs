<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Building with dtAssemble - DataTorrent Documentation</title>
  

  <link rel="shortcut icon" href="../../favicon.ico">
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Building with dtAssemble";
    var mkdocs_page_input_path = "tutorials/salesdimensions-c2.md";
    var mkdocs_page_url = "/tutorials/salesdimensions-c2/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 

  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-44586211-2', 'docs.datatorrent.com');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> DataTorrent Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">DataTorrent RTS</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Demos</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../demo_videos/">Videos</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../demos/">Running Apps</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../sandbox/">Sandbox</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Development</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../create/">Creating Applications</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Tutorials</span></li>

        
            
    <ul class="subnav">
    <li><span>Top N Words</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../topnwords/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../topnwords-c1/">Development Environment</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../topnwords-c2/">Building in Java</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../topnwords-c3/">Building with dtAssemble</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../topnwords-c4/">Monitoring with dtManage</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../topnwords-c5/">Visualizing with dtDashboard</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../topnwords-c7/">Advanced Features</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../topnwords-c6/">Appendix</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Sales Dimensions</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../salesdimensions/">Building in Java</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Building with dtAssemble</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#building-the-sales-dimensions-application-using-dtassemble">Building the Sales Dimensions application using dtAssemble</a></li>
                
                    <li><a class="toctree-l4" href="#step-1-open-the-application-builder-interface">Step 1: Open the Application Builder interface</a></li>
                
                    <li><a class="toctree-l4" href="#step-2-add-and-connect-operators">Step 2: Add and connect operators</a></li>
                
                    <li><a class="toctree-l4" href="#step-3-customize-application-and-operator-settings">Step 3: Customize application and operator settings</a></li>
                
                    <li><a class="toctree-l4" href="#step-4-launch-the-application">Step 4: Launch the application</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../salesdimensions-c3/">Visualizing with dtDashboard</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../salesdimensions-c4/">Monitoring with dtManage</a>
        
    </li>

        
    </ul>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../apex_development_setup/">Apex Development Setup</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../application_development/">Applications</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../application_packages/">Application Packages</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../configuration_packages/">Configuration Packages</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../operator_development/">Operators</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Library Operators</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../operators/kafkaInputOperator/">Kafka Input</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../operators/dimensions_computation/">Dimension Computation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../operators/hdht/">HDHT</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../operators/deduper/">Deduper</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../operators/file_splitter/">File Splitter</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../operators/block_reader/">Block Reader</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../operators/file_output/">File Output</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../dtgateway_api/">REST API</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../autometrics/">AutoMetric API</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Applications</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../dtingest/">dtIngest</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Platform</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../rts/">RTS</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../dtmanage/">dtManage</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../dtassemble/">dtAssemble</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../dtdashboard/">dtDashboard</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../dtgateway/">dtGateway</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../apex/">Apache Apex</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../apex_malhar/">Apache Apex-Malhar</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Deployment and Operations</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../installation/">Installation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../configuration/">Configuration</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../dtgateway_security/">Security</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../dtcli/">dtCli</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../troubleshooting/">Troubleshooting</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../release_notes/">Release Notes</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../glossary/">Glossary</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../additional_docs/">Resources</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">DataTorrent Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Tutorials &raquo;</li>
        
      
        
          <li>Sales Dimensions &raquo;</li>
        
      
    
    <li>Building with dtAssemble</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="building-the-sales-dimensions-application-using-dtassemble">Building the Sales Dimensions application using dtAssemble</h1>
<p>The DataTorrent RTS platform supports building new applications using <strong>dtAssemble</strong>, the Graphical
Application Builder which we will use for the Sales Dimensions application. <strong>dtAssemble</strong>
is an easy and intuitive tool for constructing applications,
while providing a great visualization of the logical operator connectivity and the
application data flow.</p>
<p><em>Note</em>: You can also find these instructions in the UI console. Click <em>Learn</em> in the menu
bar, and then click the first link in the left panel: <em>Transform, Analyze, Alert</em>.</p>
<h2 id="step-1-open-the-application-builder-interface">Step 1: Open the Application Builder interface</h2>
<ol>
<li>On the DataTorrent RTS console, navigate to <em>App Packages</em>.</li>
<li>Make sure that the DataTorrent Dimensions Demos package is imported (if
    not, use the Import Demos button to import it).</li>
<li>Click the green <em>Create new application</em> button, and name the application
    Sales Dimensions. The Application Canvas window should open.
    <img alt="Canvas" src="../images/sales_dimensions/image23.png" title="Canvas" /></li>
</ol>
<h2 id="step-2-add-and-connect-operators">Step 2: Add and connect operators</h2>
<ol>
<li>
<p>Under <em>Operator Library</em> in the left panel, select the following
    operators and drag them to the Application Canvas. Rename them to
    the names given in parentheses.</p>
<ol>
<li><strong>JSON Sales Event Generator (Input)</strong> – This operator generates
   synthetic sales events and emits them as JSON string bytes.</li>
<li><strong>JSON to Map Parser (Parse)</strong> – This operator transforms JSON
   data to Java maps for convenience in manipulating the sales data
   in Java code.</li>
<li><strong>Enrichment (Enrich)</strong> – This operator performs category lookup based on
   incoming product IDs, and adds the category ID to the output maps.</li>
<li><strong>Dimension Computation Map (Compute)</strong> – This operator performs dimensions
   computations, also known as cubing, on the incoming data. It
   pre-computes the sales numbers by region, product category, customer,
   and sales channel, and all combinations of the above. Having these
   numbers available in advance, allows for viewing and taking action on
   any of these combinations in real time.</li>
<li><strong>Simple App Data Dimensions Store (Store)</strong> &ndash; This operator
   stores the computed dimensional information on HDFS in an optimized manner.</li>
<li><strong>App Data Pub Sub Query (Query)</strong> &ndash; The dashboard connector for
   visualization queries.</li>
<li><strong>App Data Pub Sub Result (Result)</strong> &ndash; The dashboard connector for
   visualization data results.</li>
</ol>
</li>
<li>
<p>To connect the operators, click the output port of each upstream operator,
    and drag the connector to the input stream of the downstream operator as shown
    in the diagram below:
    <img alt="streams" src="../images/sales_dimensions/image01.png" title="streams" /></p>
</li>
</ol>
<h2 id="step-3-customize-application-and-operator-settings">Step 3: Customize application and operator settings</h2>
<p>Customize the operators and streams as described in each item below; to do that,
click the individual operator or stream and use the <em>Operator Inspector</em> panel
on the right to edit the operator and stream settings as described in the item:</p>
<ol>
<li>
<p>Copy this Sales schema below into the <em>Event Schema JSON</em> field of <strong>Input</strong>
    operator, and the <em>Configuration Schema JSON</em> of the <strong>Compute</strong> and <strong>Store</strong>
    operators.</p>
<pre><code>{
  "keys": [
    {"name":"channel","type":"string","enumValues":["Mobile","Online","Store"]},
    {"name":"region","type":"string",
     "enumValues":["Atlanta","Boston","Chicago","Cleveland","Dallas","Minneapolis",
                   "New York","Philadelphia","San Francisco","St. Louis"]},
    {"name":"product","type":"string",
     "enumValues":["Laptops","Printers","Routers","Smart Phones","Tablets"]}],
  "timeBuckets":["1m", "1h", "1d"],
  "values": [
    {"name":"sales","type":"double","aggregators":["SUM"]},
    {"name":"discount","type":"double","aggregators":["SUM"]},
    {"name":"tax","type":"double","aggregators":["SUM"]}],
  "dimensions": [
    {"combination":[]},
    {"combination":["channel"]},
    {"combination":["region"]},
    {"combination":["product"]},
    {"combination":["channel","region"]},
    {"combination":["channel","product"]},
    {"combination":["region","product"]},
    {"combination":["channel","region","product"]}]
}
</code></pre>
</li>
<li>
<p>Set the <em>Topic</em> property for <strong>Query</strong> and <strong>Result</strong> operators to
    <code>SalesDimensionsQuery</code> and <code>SalesDimensionsResult</code> respectively.</p>
</li>
<li>Select the <strong>Store</strong> operator, and edit the <em>File Store</em> property.
    Set <em>Base Path</em> value to <code>SalesDimensionsDemoStore</code>. This sets the HDHT
    storage path to write dimensions computation results to
    <code>/user/&lt;username&gt;/SalesDimensionsDemoStore</code> on HDFS.
    <img alt="filestore" src="../images/sales_dimensions/image05.png" title="filestore" /></li>
<li>Click the stream, and set the Stream Locality to CONTAINER_LOCAL
    for all the streams between Input and Compute operators.</li>
</ol>
<p><em>Note</em>: Changing stream locality controls which container operators
get deployed to, and can lead to significant performance improvements
for an application. Once set, the connection will be represented by a
dashed line to indicate the new locality setting.</p>
<h2 id="step-4-launch-the-application">Step 4: Launch the application</h2>
<p>Once the application is constructed, and validation checks are
satisfied, a launch button will become available at the top left of the
<em>Application Canvas</em> window. Clicking this button to open the application
launch dialog box. You can use this dialog box to perform additional
configuration of the application such as changing its name or modifying
properties.</p>
<p>To launch the Sales Dimension application</p>
<ol>
<li>Click the launch button at the top left of the application canvas screen.</li>
<li>Type a name for the application in the <em>Name this application</em> box.</li>
<li>(Optional) To configure the application using a configuration file, select
    <em>Use a config file</em> checkbox.</li>
<li>(Optional) To specify individual properties, select
    <em>Specify custom properties</em> checkbox.</li>
<li>Click Launch.</li>
</ol>
<p><img alt="Launch" src="../images/sales_dimensions/image21.png" title="Launch" /></p>
<p>Once the application is successfully launched, you can check its
health and view some runtime statistics using the steps below.
Additional details are in the chapter entitled <em>Monitoring the Sales
Dimensions Application with dtManage</em>.</p>
<ol>
<li>Go to the Sales Dimensions application operations page under the <em>Monitor</em> tab.</li>
<li>Confirm that the application is launched successfully by validating that
    the state of the application under the <em>Application Overview</em> section
    is <em>Running</em>.</li>
<li>Make sure that all the operators are successfully started under the
    <em>Stram Events</em> section.</li>
<li>Navigate to the <em>Physical view</em> tab, observe the Input, Parse, Enrich, or
    Compute operators, and ensure that they are deployed to a single container,
    because of the stream locality setting of CONTAINER_LOCAL.</li>
</ol>
<p><em>Note</em>: This is one of the many performance improvement techniques
available with the DataTorrent platform; in this case eliminating data
serialization and networking stack overhead between groups of adjacent
operators.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../salesdimensions-c3/" class="btn btn-neutral float-right" title="Visualizing with dtDashboard">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../salesdimensions/" class="btn btn-neutral" title="Building in Java"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../salesdimensions/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../salesdimensions-c3/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
